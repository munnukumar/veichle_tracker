{
  "swagger": "2.0",
  "info": {
    "title": "FreelanceHub API",
    "description": "API for user and project management.",
    "version": "1.0.0",
    "contact": {
      "name": "Your Name",
      "email": "your.email@example.com"
    }
  },
  "host": "localhost:5000",
  "basePath": "/api",
  "tags": [
    {
      "name": "User",
      "description": "Operations related to user management"
    },
    {
      "name": "Project",
      "description": "Operations related to project management"
    },
    {
      "name": "Payment",
      "description": "Razorpay payment operations"
    }
  ],
  "paths": {
    "/users/create": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Create a new user",
        "description": "This endpoint allows an admin to create a new user.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "User object to create",
            "required": true,
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "User successfully created",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "400": {
            "description": "Invalid input data"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/users/profile": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get all users",
        "description": "This endpoint allows an admin to get a list of all users.",
        "responses": {
          "200": {
            "description": "List of users",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/User"
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/users/{id}": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Get user by ID",
        "description": "This endpoint allows retrieving a specific user by their ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "User successfully retrieved",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "404": {
            "description": "User not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/users/update": {
      "patch": {
        "tags": [
          "User"
        ],
        "summary": "Update user details",
        "description": "This endpoint allows a user to update their profile information.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Authentication token to authorize the user",
            "required": true,
            "type": "string",
            "example": "Bearer <auth-token>"
          },
          {
            "name": "body",
            "in": "body",
            "description": "User object to update",
            "required": true,
            "schema": {
              "$ref": "#/definitions/User"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User successfully updated",
            "schema": {
              "$ref": "#/definitions/User"
            }
          },
          "400": {
            "description": "Invalid input data"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Login user",
        "description": "This endpoint allows users to log in and obtain a JWT token.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "description": "User credentials for login",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Login"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Login successful",
            "schema": {
              "$ref": "#/definitions/LoginResponse"
            }
          },
          "400": {
            "description": "Invalid credentials"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/projects/create": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Create a new project",
        "description": "This endpoint allows an admin to create a new project.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Admin authentication token",
            "required": true,
            "type": "string",
            "example": "Bearer <token>"
          },
          {
            "name": "body",
            "in": "body",
            "description": "Project object to create",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ProjectCreate"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Project successfully created",
            "schema": {
              "$ref": "#/definitions/Project"
            }
          },
          "400": {
            "description": "Invalid input data"
          },
          "403": {
            "description": "Forbidden - Admin only"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/projects/all": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get all active projects",
        "description": "Fetch a list of all active digital projects.",
        "responses": {
          "200": {
            "description": "List of projects",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Project"
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/projects/{id}": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project by ID",
        "description": "Retrieve a project by its ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Project ID",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Project retrieved successfully",
            "schema": {
              "$ref": "#/definitions/Project"
            }
          },
          "404": {
            "description": "Project not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/projects/update/{id}": {
      "patch": {
        "tags": [
          "Project"
        ],
        "summary": "Update project details",
        "description": "Allows an admin to update a project.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Admin token",
            "required": true,
            "type": "string",
            "example": "Bearer <token>"
          },
          {
            "name": "id",
            "in": "path",
            "description": "Project ID",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "description": "Project fields to update",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ProjectUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project updated successfully",
            "schema": {
              "$ref": "#/definitions/Project"
            }
          },
          "404": {
            "description": "Project not found"
          },
          "400": {
            "description": "Invalid input"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/projects/delete/{id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Delete a project",
        "description": "Soft delete a project.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Admin token",
            "required": true,
            "type": "string",
            "example": "Bearer <token>"
          },
          {
            "name": "id",
            "in": "path",
            "description": "Project ID",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Project deleted successfully",
            "schema": {
              "$ref": "#/definitions/DeleteResponse"
            }
          },
          "404": {
            "description": "Project not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/payment/razorpay/order": {
      "post": {
        "tags": [
          "Payment"
        ],
        "summary": "Create Razorpay order",
        "description": "Creates a Razorpay payment order and a pending transaction.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "type": "string",
            "example": "Bearer <token>"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "description": "Project ID to purchase",
            "schema": {
              "$ref": "#/definitions/CreateRazorpayOrderInput"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Razorpay order created successfully",
            "schema": {
              "$ref": "#/definitions/CreateRazorpayOrderResponse"
            }
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/payment/razorpay/verify": {
      "post": {
        "tags": [
          "Payment"
        ],
        "summary": "Verify Razorpay payment",
        "description": "Verifies Razorpay payment signature and updates transaction status.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/VerifyRazorpayPaymentInput"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment verified successfully",
            "schema": {
              "$ref": "#/definitions/Transaction"
            }
          },
          "400": {
            "description": "Invalid signature"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/payment/razorpay/webhook": {
      "post": {
        "tags": [
          "Payment"
        ],
        "summary": "Razorpay webhook",
        "description": "Receives payment status updates from Razorpay.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Webhook processed successfully"
          },
          "400": {
            "description": "Invalid signature"
          }
        }
      }
    },
    "/payment/my-payments": {
      "get": {
        "tags": [
          "Payment"
        ],
        "summary": "Get logged-in user's payments",
        "description": "Fetch all payments made by the authenticated user.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "type": "string",
            "example": "Bearer <token>"
          }
        ],
        "responses": {
          "200": {
            "description": "List of user payments",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Transaction"
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/payment/project/{projectId}": {
      "get": {
        "tags": [
          "Payment"
        ],
        "summary": "Get payments for a specific project",
        "description": "Fetch all payments made for a given project.",
        "parameters": [
          {
            "name": "projectId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Payments fetched successfully",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Transaction"
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    }
  },
  "definitions": {
    "User": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "role": {
          "type": "string",
          "enum": [
            "ADMIN",
            "USER"
          ]
        },
        "isBlocked": {
          "type": "boolean"
        },
        "image": {
          "type": "string"
        },
        "isEmailVerified": {
          "type": "boolean"
        },
        "resetPasswordToken": {
          "type": "string"
        },
        "resetPasswordExpires": {
          "type": "string"
        },
        "refreshToken": {
          "type": "string"
        }
      }
    },
    "Login": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      }
    },
    "LoginResponse": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        }
      }
    },
    "ProjectCreate": {
      "type": "object",
      "required": [
        "title",
        "description",
        "price"
      ],
      "properties": {
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "price": {
          "type": "number"
        },
        "category": {
          "type": "string"
        },
        "thumbnail": {
          "type": "string"
        },
        "files": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "ProjectUpdate": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "price": {
          "type": "number"
        },
        "category": {
          "type": "string"
        },
        "thumbnail": {
          "type": "string"
        },
        "files": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Project": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "price": {
          "type": "number"
        },
        "category": {
          "type": "string"
        },
        "thumbnail": {
          "type": "string"
        },
        "files": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "isActive": {
          "type": "boolean"
        },
        "createdBy": {
          "type": "string"
        },
        "createdAt": {
          "type": "string"
        },
        "updatedAt": {
          "type": "string"
        }
      }
    },
    "DeleteResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "message": {
          "type": "string"
        },
        "data": {
          "type": "object"
        }
      }
    },
    "CreateRazorpayOrderInput": {
      "type": "object",
      "required": [
        "projectId"
      ],
      "properties": {
        "projectId": {
          "type": "string",
          "example": "67c1bfeb2f0a8c30e8d8babc"
        }
      }
    },
    "CreateRazorpayOrderResponse": {
      "type": "object",
      "properties": {
        "order": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "example": "order_Nt4f1B1gqL"
            },
            "amount": {
              "type": "number",
              "example": 100000
            },
            "currency": {
              "type": "string",
              "example": "INR"
            }
          }
        },
        "transactionId": {
          "type": "string",
          "example": "67c1c091f20aa5a8a22d33aa"
        }
      }
    },
    "VerifyRazorpayPaymentInput": {
      "type": "object",
      "required": [
        "razorpay_order_id",
        "razorpay_payment_id",
        "razorpay_signature",
        "transactionId"
      ],
      "properties": {
        "razorpay_order_id": {
          "type": "string",
          "example": "order_Nt4f1B1gqL"
        },
        "razorpay_payment_id": {
          "type": "string",
          "example": "pay_Nt4fWnZqYm"
        },
        "razorpay_signature": {
          "type": "string",
          "example": "signature_hash_here"
        },
        "transactionId": {
          "type": "string",
          "example": "67c1c091f20aa5a8a22d33aa"
        }
      }
    },
    "Transaction": {
      "type": "object",
      "properties": {
        "_id": {
          "type": "string",
          "example": "67c1c091f20aa5a8a22d33aa"
        },
        "user": {
          "type": "string",
          "example": "67bfa88c8244d205d3633390"
        },
        "project": {
          "type": "string",
          "example": "67c1bfeb2f0a8c30e8d8babc"
        },
        "amount": {
          "type": "number",
          "example": 499
        },
        "paymentMethod": {
          "type": "string",
          "example": "razorpay"
        },
        "transactionId": {
          "type": "string",
          "example": "order_Nt4f1B1gqL"
        },
        "paymentStatus": {
          "type": "string",
          "enum": [
            "PENDING",
            "SUCCESS",
            "FAILED"
          ],
          "example": "SUCCESS"
        },
        "createdAt": {
          "type": "string"
        },
        "updatedAt": {
          "type": "string"
        }
      }
    }
  }
}